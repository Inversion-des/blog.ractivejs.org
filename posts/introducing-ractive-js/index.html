<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<title>Introducing Ractive.js | Blog | Ractive.js</title>

	<link rel="icon" type="image/png" href="../../assets/favicon.png">

	<link rel="stylesheet" href="../../min.css">

	<!--[if lte IE 8]>
		<script src='../../assets/respond.min.js'></script>
		<script src='../../assets/html5shiv.min.js'></script>
	<![endif]-->
</head>

<body>

	<nav>
	<div class="nav-inner">
		<a href="http://ractivejs.org">Ractive.js</a>

		<ul>
			<li><a href=http://ractivejs.org/60-second-setup>60 second setup</a></li>
			<li><a href=http://learn.ractivejs.org>Tutorials</a></li>
			<li><a href=http://examples.ractivejs.org>Examples</a></li>
			<li><a href=http://docs.ractivejs.org>Docs</a></li>
			<li><a href=http://docs.ractivejs.org/latest/plugins>Plugins</a></li>
			<li class=selected><a href=http://blog.ractivejs.org>Blog</a></li>
			<li class=github-small><a href=https://github.com/ractivejs/ractive>GitHub</a></li>
		</ul>

		<a class="github-wide" href="https://github.com/ractivejs/ractive">GitHub</a>

		<button id="nav-toggle">&#9776;</button>
	</div>
</nav>
		<header class="post-header">
			<h1>Introducing Ractive.js</h1>
			<p class="meta">
				<a href="http://twitter.com/Rich_Harris">Rich Harris</a>
				
				<span class="bullet">&bull;</span> 30 December 2013 <span class="bullet">&bull;</span> <a href="#disqus_thread" data-disqus-identifier="introducing-ractive-js">Comments</a>
			</p>
		</header>

		<main>
			<article class="post">
					<figure class="poster type-default">
							<a href="http://www.theguardian.com/global-development/interactive/2013/jun/07/food-game-what-do-you-know"><img class="poster" alt="Ractive.js is used to create guardian.co.uk interactives, such as '<a href='http://www.theguardian.com/global-development/interactive/2013/jun/07/food-game-what-do-you-know'>Food game: How well do you know the world?</a>'" src="../../assets/images/foodgame.jpg"></a>
												
							<figcaption>
								Ractive.js is used to create guardian.co.uk interactives, such as '<a href='http://www.theguardian.com/global-development/interactive/2013/jun/07/food-game-what-do-you-know'>Food game: How well do you know the world?</a>'
							</figcaption>
					</figure>
				<p><em>Originally posted on the <a href="http://www.theguardian.com/info/developer-blog/2013/jul/24/ractive-js-next-generation-dom-manipulation">Guardian developer blog</a></em></p>
<p>Anyone with fond memories of the <a href="http://www.youtube.com/watch?v=gsNaR6FRuO0">sound of dial-up internet</a> will understand how ridiculous it would have seemed, to the web&#39;s pioneers, that we would one day be using this geeky information exchange format to play games, do grocery shopping, collaborate on spreadsheets and even <a href="https://c9.io/">build more webapps</a>. Yet here we are.</p>
<p>But despite taking over the world, the web has a dirty secret: it&#39;s actually a lousy platform for creating many of the experiences we take for granted. Let me qualify that: it&#39;s an amazing technology for creating <em>documents</em>, but for creating <em>apps</em> &ndash; interactive experiences that respond to user input, and represent changing data &ndash; web development can be akin to pulling teeth.</p>
<p>Consider the following simple task. We have an interface that shows our user, Dave, how many unread messages he has. When he gets a new message, how do we update the interface?</p>
<pre class="prettyprint lang-html">&lt;p&gt;Hello Dave! You have 4 new messages.&lt;/p&gt;</pre>

<p>In the bad old days, you&#39;d have to reload the page, and the server would send you some freshly-rendered HTML. But let&#39;s assume we&#39;ve got a model that contains our data, and that we need to update the existing view. Here are our options:</p>
<h2 id="1-just-use-jquery">1. Just use jQuery</h2>
<pre class="prettyprint lang-js">var p = $('p');

function updateView (username, msgCount) {
  p.text('Hello ' + username + '! You have ' + msgCount + ' new messages.');
};</pre>

<p>This is generally agreed to be a Bad Idea &ndash; mixing your templates and your logic will end in tears. What if a non-programmer needs to change the wording? They&#39;ll probably break something, that&#39;s what.</p>
<h2 id="2-target-specific-elements">2. Target specific elements</h2>
<pre class="prettyprint lang-html">&lt;p&gt;
  Hello &lt;span id='username'&gt;&lt;/span&gt;!
  You have &lt;span id='msgCount'&gt;&lt;/span&gt; new messages.
&lt;/p&gt;</pre>

<pre class="prettyprint lang-js">var usernameSpan = $('#username'),
  msgCountSpan = $('#msgCount');

function updateUserName (username) {
  usernameSpan.text(username);
};

function updateMsgCount (msgCount) {
  msgCountSpan.text(msgCount);
};

// initialise our view
updateUsername(model.username);
updateMsgCount(model.msgCount);</pre>

<p>Better, except that now we&#39;ve added two extra <code>&lt;span&gt;</code> elements to the DOM. That means more work for the browser, which can become particularly noticeable on mobile devices. And we&#39;ve got to traverse the DOM and store references to elements.</p>
<h2 id="3-templating">3. Templating</h2>
<pre class="prettyprint lang-html">&lt;p&gt;Hello &lt;%= username %&gt;! You have &lt;%= msgCount %&gt; new messages.&lt;/p&gt;</pre>

<p>Now we&#39;re getting somewhere &ndash; our templates and our logic are cleanly separated. But wait! What happens when we update the view?</p>
<pre class="prettyprint lang-js">var body = $(body),
  // we're using Underscore templates here
  template = new _.template(templateStr);

function updateView (model) {
  var html = template({
    username: model.username,
    msgCount: model.msgCount
  });

  body.html(html);
};

// initialise
updateView(model);</pre>

<p>What happens is that the existing element gets removed from the DOM, and a new one gets created. At best, the old one will be hoovered up by the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Memory_Management">garbage collector</a>; at worst, it will remain in memory. Either way, it&#39;s bad for performance.</p>
<p>In the context of this contrived example it might seem trivial, but as an app becomes more complex, these things start to show.</p>
<h2 id="4-just-use-angular">4. Just use Angular</h2>
<p>At this point, many developers will point you towards a framework such as <a href="http://angularjs.org">AngularJS</a> or <a href="http://emberjs.com/">EmberJS</a>. These frameworks do a lot of the heavy lifting for you, particularly as far as model-view data binding is concerned.</p>
<p>Angular in particular is hugely popular at the moment. (The Guardian is currently using it for a major internal project, in fact.)</p>
<p>But these frameworks also have a cost &ndash; they tend to be fairly large, and once you&#39;ve finished the &#39;hello world&#39; tutorials they have steep learning curves. Particularly for smaller projects, it&#39;s often a case of using a sledgehammer to crack a nut.</p>
<p>You see the problem. What should be an incredibly basic task is a snakepit of compromises and ugly code &ndash; yet we&#39;re all so used to developing this way that we&#39;re barely even aware of how awkward it is.</p>
<h2 id="enter-ractive-js">Enter Ractive.js</h2>
<p><a href="http://ractivejs.org">Ractive</a> was initially created to tackle the data binding problem in a more elegant way. We on the <a href="http://www.guardian.co.uk/profile/guardian-interactive-department">Guardian interactive team</a> are acutely aware of the challenges of creating app-like experiences on the web; interactives, by their nature, require a huge amount of DOM manipulation, and as slaves to the editorial agenda we typically have tight deadlines.</p>
<p>The above example, with Ractive, would go something like this:</p>
<pre class="prettyprint lang-html">&lt;p&gt;Hello {{username}}! You have {{msgCount}} new messages.&lt;/p&gt;</pre>

<pre class="prettyprint lang-js">var view = new Ractive({
  el: document.body,
  template: templateStr,
  data: model // contains our username and msgCount properties
});

function updateView (model) {
  view.set(model);
};</pre>

<p>Initially, Ractive parses the template and determines that <code>{{msgCount}}</code> should be treated as a separate <em>text node</em>, which depends on the <code>msgCount</code> property of our model.</p>
<p>When you call <code>view.set()</code>, Ractive compares the new data against its current state, and scans its internal dependency graph to see if any part of the DOM needs to be updated. If so, it only touches those parts &ndash; which means no DOM nodes will be created or destroyed.</p>
<p>The browser has much less work to do, but &ndash; and this is the crucial part &ndash; so does the developer. The benefits of this approach become increasingly apparent as you deal with more complex templates, representing more complex data. You can see for yourself how it makes life easier by following the <a href="http://learn.ractivejs.org">tutorials</a> or checking out the <a href="http://examples.ractivejs.org">examples</a>.</p>
<h2 id="beyond-data-binding">Beyond data binding</h2>
<p>It soon became apparent that this approach enables us to do other things more efficiently as well. It&#39;s a philosophical change in the relationship between HTML and JavaScript &ndash; HTML is no longer an inert substance which must have life breathed into it, but a blueprint for an app that is interactive by default.</p>
<p>Take event handling for example. Web developers are used to peppering their HTML with meaningless <code>id</code> and <code>class</code> attributes as &#39;hooks&#39;, so that they can later traverse the DOM, find them, and add event handlers:</p>
<pre class="prettyprint lang-html">&lt;button id='activate'&gt;Activate!&lt;/button&gt;
&lt;button id='deactivate'&gt;Deactivate!&lt;/button&gt;</pre>

<pre class="prettyprint lang-js">$('#activate').on('click', function () {
  alert('Activating!');
});

$('#deactivate').on('click', function () {
  alert('Deactivating!');
});</pre>

<p>But if you treat the HTML as a blueprint, you can bake the semantics of user interaction right into your template:</p>
<pre class="prettyprint lang-html">&lt;button proxy-click='activate'&gt;Activate!&lt;/button&gt;
&lt;button proxy-click='deactivate'&gt;Deactivate!&lt;/button&gt;</pre>

<pre class="prettyprint lang-js">view.on({
  activate: function () {
    alert('Activating!');
  },
  deactivate: function () {
    alert('Deactivating!');
  }
});</pre>

<p>Moreover, we can now automatically take care of things like reusing event handlers and automatically unbinding them when they&#39;re no longer needed. Event delegation becomes unnecessary. As with data binding, this approach prevents your code from becoming unwieldy as your app grows.</p>
<h2 id="sexy-features">Sexy features</h2>
<p>So far, this all sounds fairly prosaic &ndash; handy, perhaps, but nothing you can&#39;t already do with <a href="http://vanilla-js.com/">vanilla JS</a>. But the real fun starts when we start exploiting some of the features that emerge from Ractive&#39;s statefulness and dependency tracking, such as complex but easy-to-create animations. We&#39;re one step closer to the holy grail of completely declarative, reactive programming.</p>
<p>But we&#39;re only getting started. While it&#39;s been used in production in several interactives, it&#39;s still an early-stage project which needs brave souls to try it out in projects and (if necessary!) submit bug reports. If you build something with it, we&#39;d love to hear from you.</p>
<figure>
    <img src="../../assets/images/animated-chart.jpg" alt="Interactive data visualisations are much easier to create with Ractive.js &ndash; no DOM event handling, no state management, no labyrinthine render methods">

    <figcaption>
        Interactive <a href="http://examples.ractivejs.org/animated-chart">data visualisations</a> are much easier to create with Ractive.js &ndash; no DOM event handling, no state management, no labyrinthine render methods
    </figcaption>
</figure>

<h2 id="acknowledgements">Acknowledgements</h2>
<p>The development of Ractive was made possible, in part, by the <a href="http://www.gatesfoundation.org/">Bill and Melinda Gates Foundation</a>&#39;s support for the Guardian <a href="http://www.guardian.co.uk/global-development">Global Development</a> desk.</p>


			</article>

			<section class="comments">
				<div id="disqus_thread"></div>
				<noscript>Please enable JavaScript to view the <a href=http://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript>
				<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class=logo-disqus>Disqus</span></a>
			</section>
		</main>
	<footer>
	<p>Ractive.js is a free and open source project released under the MIT license.</p>
</footer>


	<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	ga('create', 'UA-5602942-5', 'ractivejs.org');
	ga('send', 'pageview');
</script>



	<script>
		// Disqus
		var disqus_shortname = 'ractivejs';
		var disqus_identifier = 'introducing-ractive-js';
		var disqus_url = 'http://blog.ractivejs.org/posts/introducing-ractive-js';

		(function() {
		    var s = function (url) {
		    	var scr = document.createElement('script'); scr.type = 'text/javascript'; scr.async = true;
		    	scr.src = url;
		    	(document.head || document.body).appendChild(scr);
		    };
		    s('//ractivejs.disqus.com/embed.js');
		    s('//ractivejs.disqus.com/count.js');
		})();
	</script>

	<script src="../../assets/prettify.js"></script>
	<script>
		prettyPrint();
	</script>
	</body>
</html>
